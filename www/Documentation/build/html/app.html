<!DOCTYPE html>
<html class="writer-html5" lang="fr" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>App &mdash; Documentation ICA Prod 0.0.1</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/translations.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Recherche" href="search.html" />
    <link rel="next" title="Annuaire" href="annuaire.html" />
    <link rel="prev" title="Installation" href="installation.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> ICA Prod
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Rechercher docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Le dossier App</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">App</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#les-dossier-public-et-intranet">Les dossier Public et Intranet</a></li>
<li class="toctree-l2"><a class="reference internal" href="#le-fichier-database">Le fichier database</a></li>
<li class="toctree-l2"><a class="reference internal" href="#le-fichier-gestionbdd">Le fichier GestionBdd</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#la-connexion-gestionbdd">La connexion GestionBdd</a></li>
<li class="toctree-l3"><a class="reference internal" href="#les-requetes-sql">Les requêtes SQL</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#le-fichier-lang-en">Le fichier lang-en</a></li>
<li class="toctree-l2"><a class="reference internal" href="#le-fichier-lang-fr">Le fichier lang-fr</a></li>
<li class="toctree-l2"><a class="reference internal" href="#le-fichier-redirect-admin-user">Le fichier redirect-admin-user</a></li>
<li class="toctree-l2"><a class="reference internal" href="#le-fichier-redirect-user">Le fichier redirect-user</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Public</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="annuaire.html">Annuaire</a></li>
<li class="toctree-l1"><a class="reference internal" href="publications.html">Publications</a></li>
<li class="toctree-l1"><a class="reference internal" href="theses.html">Theses</a></li>
<li class="toctree-l1"><a class="reference internal" href="fichiersPublic.html">Fichiers Public</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Intranet</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="equipement.html">Equipement</a></li>
<li class="toctree-l1"><a class="reference internal" href="formulaire.html">Formulaire</a></li>
<li class="toctree-l1"><a class="reference internal" href="offre.html">Offres</a></li>
<li class="toctree-l1"><a class="reference internal" href="reservation.html">Réservations</a></li>
<li class="toctree-l1"><a class="reference internal" href="registrehygiene.html">Registre Hygiene</a></li>
<li class="toctree-l1"><a class="reference internal" href="stats.html">Stats</a></li>
<li class="toctree-l1"><a class="reference internal" href="zrr.html">ZRR</a></li>
<li class="toctree-l1"><a class="reference internal" href="gestiontheses.html">Theses</a></li>
<li class="toctree-l1"><a class="reference internal" href="fichiersIntranet.html">Fichiers Intranet</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ICA Prod</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>App</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/app.rst.txt" rel="nofollow"> Afficher la source de la page</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="app">
<h1>App<a class="headerlink" href="#app" title="Lien permanent vers ce titre"></a></h1>
<div class="section" id="les-dossier-public-et-intranet">
<h2>Les dossier Public et Intranet<a class="headerlink" href="#les-dossier-public-et-intranet" title="Lien permanent vers ce titre"></a></h2>
<p>Ces deux dossiers seront décrits dans le reste de la documentation.
La principale chose à savoir c’est que tous les fichiers présents dans le dossier App
sont pour la plus part réutilisés dans la majorité des pages du site.</p>
</div>
<div class="section" id="le-fichier-database">
<h2>Le fichier database<a class="headerlink" href="#le-fichier-database" title="Lien permanent vers ce titre"></a></h2>
<p>Ce fichier a une utilité très simple, il permet la connexion avec la base de donnée.
On peut y retrouver l’id du serveur auquel on souhaite se connecter, le nom du serveur, le pseudo de connexion
ainsi que le mot de passe pour se connecter.
Ces identifiants de connexion sont définis dans des variables réutilisables.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Ce fichier est utilisé dans le fichier <em>GestionBdd</em> que nous verrons ci-dessous.</p>
</div>
</div>
<div class="section" id="le-fichier-gestionbdd">
<h2>Le fichier GestionBdd<a class="headerlink" href="#le-fichier-gestionbdd" title="Lien permanent vers ce titre"></a></h2>
<p>Le fichier GestionBDD est divisé en deux grandes parties.</p>
<div class="section" id="la-connexion-gestionbdd">
<h3>La connexion GestionBdd<a class="headerlink" href="#la-connexion-gestionbdd" title="Lien permanent vers ce titre"></a></h3>
<p>La première n’est autre que la connexion à la base de donnée grâce à la fonction : fonction __construct()
Les variables <strong>DB_SERVEUR</strong>, <strong>DB_NAME</strong>, <strong>DB_USERNAME</strong> et <strong>DB_PASSWORD</strong> sont définis dans le fichier <em>database</em></p>
</div>
<div class="section" id="les-requetes-sql">
<h3>Les requêtes SQL<a class="headerlink" href="#les-requetes-sql" title="Lien permanent vers ce titre"></a></h3>
<p>La deuxième partie contient toutes les requêtes SQL du site ICA.
La plus part de ces requêtes sont commentées pour une compréhension plus simple.
La méthode utilisée pour faire ces requêtes est très simple, elle utilise une base répétitive.</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">Exemple de code</span><a class="headerlink" href="#id1" title="Lien permanent vers ce code"></a></div>
<div class="highlight-PHP notranslate"><div class="highlight"><pre><span></span><span class="x">    public function getTheses(&lt;parametre&gt;){</span>
<span class="x">        $req = $this-&gt;bdd-&gt;prepare(&#39;SELECT th.id, th.date_debut, th.date_soutenance FROM wp_pods_these th, wp_podsrel rel WHERE rel.pod_id = 862 AND rel.field_id = 1380 AND rel.item_id = th.id AND rel.related_item_id = ?&#39;);</span>
<span class="x">        $req-&gt;execute(array(&lt;parametre&gt;));</span>
<span class="x">        return $req;</span>
<span class="x">    }</span>
</pre></div>
</div>
</div>
<dl class="simple">
<dt>Dans l’exemple ci-dessus on peut voir que nous préparons la requete en faisant :</dt><dd><p><em>$req = $this-&gt;bdd-&gt;prepare</em> (<strong>REQUETE</strong>)</p>
</dd>
</dl>
<p>Enfin on execute la requete, avec le array les “?” dans la requete seront remplacés par le paramètre de notre fonction.
Si nous avons plusieurs paramètres ils seront remplacés dans l’ordre du array.
Selon l’utilisation il est intéréssant ou pas de return le resultat.</p>
</div>
</div>
<div class="section" id="le-fichier-lang-en">
<h2>Le fichier lang-en<a class="headerlink" href="#le-fichier-lang-en" title="Lien permanent vers ce titre"></a></h2>
<p>Ce fichier permet la traduction automatique du site.
Nous allons définir un mot en anglais à une variable qui sera identique à celle du fichier lang-fr.
Cela nous permettra d’alterner entre la version anglaise contenue dans cette page et la version française
contenue dans la page <em>lang-fr</em></p>
<p>Le code ci-dessous se retrouvera en tête de page pour permettre de changer de langue de la page en un clic.</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">Code de traduction</span><a class="headerlink" href="#id2" title="Lien permanent vers ce code"></a></div>
<div class="highlight-PHP notranslate"><div class="highlight"><pre><span></span><span class="x">    if(strpos($currentlang,&#39;fr&#39;)!==false){</span>
<span class="x">        include(&#39;App/lang-fr.php&#39;);</span>
<span class="x">    }elseif(strpos($currentlang,&#39;en&#39;)!==false){</span>
<span class="x">        include(&#39;App/lang-en.php&#39;);</span>
<span class="x">    }else{</span>
<span class="x">        echo(&quot;échec de reconnaissance de la langue&quot;);</span>
<span class="x">    }</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="le-fichier-lang-fr">
<h2>Le fichier lang-fr<a class="headerlink" href="#le-fichier-lang-fr" title="Lien permanent vers ce titre"></a></h2>
<p>Comme le fichier précedant,ce fichier permet la traduction automatique du site.
Nous allons définir un mot en français à une variable qui sera identique à celle du fichier lang-en.
Cela nous permettra d’alterner entre la version française contenue dans cette page et la version anglaise
contenue dans la page <em>lang-en</em></p>
<p>Le code ci-dessous se retrouvera en tête de page pour permettre de changer de langue de la page en un clic.</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">Code de traduction</span><a class="headerlink" href="#id3" title="Lien permanent vers ce code"></a></div>
<div class="highlight-PHP notranslate"><div class="highlight"><pre><span></span><span class="x">    if(strpos($currentlang,&#39;fr&#39;)!==false){</span>
<span class="x">        include(&#39;App/lang-fr.php&#39;);</span>
<span class="x">    }elseif(strpos($currentlang,&#39;en&#39;)!==false){</span>
<span class="x">        include(&#39;App/lang-en.php&#39;);</span>
<span class="x">    }else{</span>
<span class="x">        echo(&quot;échec de reconnaissance de la langue&quot;);</span>
<span class="x">    }</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="le-fichier-redirect-admin-user">
<h2>Le fichier redirect-admin-user<a class="headerlink" href="#le-fichier-redirect-admin-user" title="Lien permanent vers ce titre"></a></h2>
<p>Ce fichier permet simplement de rediriger un utilisateur qui n’est pas connecté vers la page de connexion.
De plus les utilisateurs n’ayant pas les permissions d’administrateur sur le site ICA d’être redirigé vers la page d’accueil.</p>
</div>
<div class="section" id="le-fichier-redirect-user">
<h2>Le fichier redirect-user<a class="headerlink" href="#le-fichier-redirect-user" title="Lien permanent vers ce titre"></a></h2>
<p>Ce fichier permet simplement de rediriger un utilisateur qui n’est pas connecté vers la page de connexion.</p>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Pied de page">
        <a href="installation.html" class="btn btn-neutral float-left" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Précédent</a>
        <a href="annuaire.html" class="btn btn-neutral float-right" title="Annuaire" accesskey="n" rel="next">Suivant <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Henrique.</p>
  </div>

  Compilé avec <a href="https://www.sphinx-doc.org/">Sphinx</a> en utilisant un
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">thème</a>
    fourni par <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>